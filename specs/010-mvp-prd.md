# MVP Product Requirements Document (PRD)

**Version**: MVP 1.1  
**Status**: Draft  
**Last Updated**: 2024-01-01

---

## 1. Product Vision

**TranScript** превращает длинные и неструктурированные YouTube-видео в понятные текстовые гайды с шагами и иллюстрациями. Гайд можно читать, редактировать, сохранять и использовать повторно.

**MVP Goal**: Создать рабочий продукт для использования мной и друзьями, с современным UI, готовым к публичному распространению, и архитектурой, поддерживающей будущее масштабирование.

---

## 2. Target Users (MVP)

### 2.1. Primary Users

**MVP target**: Я (создатель) + друзья (ограниченная группа пользователей)

**Characteristics**:
- Технически грамотные пользователи
- Потребность в структурировании длинных обучающих видео
- Готовность к использованию MVP-версии продукта

### 2.2. Distribution Readiness

**MVP должен быть готов к публичному распространению**:
- Современный, минималистичный UI без "дешевых" элементов YouTube-брендинга
- Отсутствие устаревших стилей и визуальных паттернов
- Профессиональный внешний вид, подходящий для демонстрации широкой аудитории
- UI/UX соответствует современным стандартам (2024+)

**Примечание**: Несмотря на готовность к распространению, MVP не включает маркетинговые функции или публичные каталоги.

---

## 3. Core Features (MVP)

### 3.1. YouTube Import & Processing

**Описание**: Пользователь вводит URL YouTube-видео, система обрабатывает его и создает структурированный гайд.

**User Flow**:
1. Пользователь вводит URL на экране импорта
2. Система валидирует URL и создает задачу обработки
3. Асинхронная обработка через пайплайн (ingest → transcript → guide steps)
4. Пользователь видит прогресс и получает готовый гайд

**Ограничения MVP**:
- Только YouTube URL (подтверждено `docs/scope.md`)
- Stub-реализация пайплайна (без реальных ML-моделей) — подтверждено `specs/020-mvp-spec.md` §4
- Лимиты на длительность видео и количество активных задач — [TBD - Decision Required: L-001, L-003]

### 3.2. Guide Viewing & Management

**Описание**: Пользователь просматривает созданные гайды, видит список шагов с таймкодами.

**User Flow**:
1. Список всех гайдов пользователя (GET /api/guides)
2. Детальный просмотр гайда со списком шагов (GET /api/guides/:id)
3. Статусы обработки: `processing`, `done`, `failed`

**Ограничения MVP**:
- Редактирование шагов НЕ включено в MVP (подтверждено `specs/020-mvp-spec.md` §6.1)
- Кадры (`Frame`) НЕ включены в MVP (подтверждено `specs/020-mvp-spec.md` §6.1)
- Экспорт НЕ включен в MVP (подтверждено `specs/020-mvp-spec.md` §6.1)

### 3.3. Multi-User Support (MVP)

**Описание**: Система поддерживает несколько пользователей (я + друзья) с изоляцией данных по владельцу.

**Requirements**:
- Простая аутентификация (JWT или cookie-based sessions) — [TBD - Decision Required: TECH-002]
- Каждый гайд привязан к владельцу (`ownerId`)
- API endpoints возвращают только гайды текущего пользователя
- Изоляция данных на уровне БД (WHERE ownerId = currentUserId)

**Примечание**: Совместное редактирование и шаринг НЕ включены в MVP (подтверждено `docs/scope.md`).

---

## 4. Payment Readiness (MVP)

### 4.1. Payments Out of Scope

**Payments НЕ реализуются в MVP**:
- Нет интеграции с платежными провайдерами
- Нет обработки платежей
- Нет биллинга и инвойсов

### 4.2. Payment Readiness Requirements

**MVP должен быть готов к будущей интеграции платежей**:

#### 4.2.1. User Tiers Model

**Требование**: Система должна поддерживать модель пользовательских тарифов (tiers).

**MVP Implementation**:
- Модель данных: `User.tier` (enum: `free`, `pro`)
- По умолчанию все пользователи имеют `tier = 'free'`
- Логика ограничений по тарифам (лимиты для free vs pro) — [TBD - Decision Required: TIER-001]

**Extension Points**:
- Структура данных позволяет легко добавить новые тарифы (`enterprise`, `team`, etc.)
- Логика ограничений вынесена в отдельный сервис/модуль для будущего расширения

#### 4.2.2. Plans Page (UI)

**Требование**: UI должен включать страницу с описанием тарифных планов.

**MVP Implementation**:
- Статическая страница `/plans` с описанием:
  - Free tier: базовые возможности, лимиты
  - Pro tier: расширенные возможности, лимиты
- Кнопки "Upgrade to Pro" (неактивные в MVP, готовы к интеграции)
- Визуальное оформление, соответствующее современному UI

**Extension Points**:
- Компонент планов изолирован и готов к подключению платежного провайдера
- Структура данных для отображения планов позволяет легко добавить новые тарифы

#### 4.2.3. Payment Provider Extension Points

**Требование**: Архитектура должна поддерживать будущую интеграцию российских платежных провайдеров.

**MVP Implementation**:
- Абстракция платежного провайдера (интерфейс/контракт) — [TBD - Decision Required: PAY-001]
- Структура для хранения информации о подписках (таблица `Subscription` или аналогичная) — [TBD - Decision Required: PAY-002]
- Логика проверки статуса подписки вынесена в отдельный модуль

**Extension Points**:
- Платежный провайдер реализуется через плагин/адаптер
- Поддержка freemium модели (free tier по умолчанию)
- Поддержка multi-tier subscriptions (free, pro, enterprise, etc.)

**Примечание**: Конкретные провайдеры (ЮKassa, CloudPayments, etc.) не выбираются в MVP, но архитектура должна их поддерживать.

---

## 5. UX Requirements (MVP)

### 5.1. Modern Minimal UI

**Требование**: UI должен быть современным и минималистичным.

**Criteria**:
- Чистый, не перегруженный интерфейс
- Современные паттерны дизайна (2024+)
- Отсутствие избыточных элементов и декораций
- Фокус на функциональности и читаемости

### 5.2. No "Cheap" YouTube Branding

**Требование**: UI не должен использовать "дешевые" элементы YouTube-брендинга.

**Prohibited**:
- Прямое копирование YouTube-иконок и стилей
- Использование официальных YouTube-логотипов без необходимости
- Визуальные элементы, ассоциирующиеся с "клонированием" YouTube

**Allowed**:
- Ссылки на YouTube-видео (текстовые или минималистичные)
- Иконки видео/плеера общего назначения (не YouTube-специфичные)

### 5.3. No Dated Styling

**Требование**: UI не должен использовать устаревшие стили и визуальные паттерны.

**Prohibited**:
- Скевоморфизм
- Устаревшие цветовые схемы (яркие неоновые цвета 2000-х)
- Устаревшие паттерны навигации
- Устаревшие типографические решения

**Required**:
- Современная типографика (системные шрифты или современные веб-шрифты)
- Современная цветовая палитра (приглушенные, профессиональные цвета)
- Современные паттерны навигации (hamburger menu, sidebar, etc. — если применимо)
- Адаптивный дизайн (mobile-first или responsive)

---

## 6. Technology Stack (MVP)

**Подтверждено `docs/tech-stack.md` и `specs/020-mvp-spec.md` §7**:

- **Frontend**: React + Vite
- **Backend Framework**: NestJS или Fastify — [TBD - Decision Required: TECH-001]
- **Queue**: BullMQ + Redis
- **Database**: PostgreSQL
- **Storage**: S3-compatible (для будущих видео/кадров, не используется в MVP)
- **Authentication**: JWT или Cookie-based sessions — [TBD - Decision Required: TECH-002]

---

## 7. Infrastructure & Scalability (MVP)

### 7.1. Low-Friction Migration Design

**Требование**: Система должна быть спроектирована так, чтобы миграция на более крупную БД/инфраструктуру была низкофрикционной.

**MVP Implementation**:
- Использование стандартных технологий (PostgreSQL, Redis, S3-compatible storage)
- Отсутствие vendor lock-in (нет специфичных для одного провайдера решений)
- Абстракции для доступа к данным (ORM или query builder)
- Конфигурация через environment variables (не hardcoded endpoints)

**Примечание**: В MVP не выполняется тяжелая инфраструктурная работа (sharding, replication, etc.), но архитектура должна их поддерживать.

### 7.2. MVP Infrastructure Scope

**В MVP включено**:
- Локальная разработка (Docker Compose для БД/Redis)
- Базовая конфигурация для продакшена (env vars, миграции БД)
- Мониторинг базовый (логирование, статусы задач)

**В MVP НЕ включено**:
- Автоматическое масштабирование воркеров
- Шардирование БД
- Репликация БД
- CDN для статики
- Advanced monitoring (метрики, трейсинг)

---

## 8. Scope Limitations (MVP)

### 8.1. Functional Limitations

**Что НЕ включено в MVP** (подтверждено `specs/020-mvp-spec.md` §6 и `docs/scope.md`):

- **Редактирование шагов**: Редактор текста шагов (PATCH /api/guides/:id) — не в MVP
- **Кадры**: Выбор и замена кадров (`Frame` сущность) — не в MVP
- **Экспорт**: Экспорт в Markdown/PDF (POST /api/guides/:id/export) — не в MVP
- **Шаринг**: Публичные ссылки (POST /api/guides/:id/share) — не в MVP
- **Реальные ML-модели**: Whisper/Vosk, Ollama — не в MVP (используются stubs)
- **Payments**: Интеграция платежных провайдеров — не в MVP
- **Совместное редактирование**: Мульти-юзер редактирование — не в MVP
- **Публичные каталоги**: Публичный каталог гайдов — не в MVP

### 8.2. MVP Focus

**Цель MVP**: Валидировать пайплайн обработки, базовый UX, и архитектуру для будущего масштабирования без зависимости от ML-моделей и сложной логики.

**MVP фокус**:
- Создание задачи обработки (multi-user)
- Асинхронная обработка через очереди
- Генерация структурированного гайда (stub)
- Просмотр результата
- Современный UI, готовый к распространению
- Payment readiness (tiers, plans page, extension points)

---

## 9. Decision Log (TBD Items)

### 9.1. Technology Decisions

| ID | Decision | Status | Impact |
|---|---|---|---|
| **TECH-001** | Backend framework (NestJS vs Fastify) | TBD | Определяет структуру проекта, типы, DI |
| **TECH-002** | Authentication (JWT vs Cookie-based sessions) | TBD | Определяет middleware и защиту API |

### 9.2. Limits & Quotas

| ID | Decision | Status | Impact |
|---|---|---|---|
| **L-001** | Максимальная длительность видео (минуты) | TBD | Валидация POST /api/guides |
| **L-003** | Количество параллельных задач на пользователя | TBD | Валидация POST /api/guides |

### 9.3. Payment Readiness Decisions

| ID | Decision | Status | Impact |
|---|---|---|---|
| **TIER-001** | Лимиты для free vs pro tiers | TBD | Логика ограничений по тарифам |
| **PAY-001** | Структура абстракции платежного провайдера | TBD | Архитектура для будущей интеграции |
| **PAY-002** | Структура данных для подписок (Subscription model) | TBD | Хранение информации о подписках |

### 9.4. Quality & Performance (Post-MVP)

| ID | Decision | Status | Impact |
|---|---|---|---|
| **Q-001** | Метрики качества транскрипции | TBD | Только для пост-MVP (реальные ML) |
| **Q-002** | Метрики качества сегментации | TBD | Только для пост-MVP (реальные ML) |
| **Q-003** | Метрики качества кадров | TBD | Только для пост-MVP (реальные ML) |
| **P-001** | SLA обработки видео | TBD | До продакшн-развертывания |
| **P-002** | SLA экспорта | TBD | До продакшн-развертывания |
| **P-003** | SLA API response time | TBD | До продакшн-развертывания |

---

## 10. Success Criteria (MVP)

### 10.1. Functional Success

- ✅ Пользователь может создать гайд из YouTube URL
- ✅ Пользователь видит прогресс обработки
- ✅ Пользователь получает структурированный гайд со списком шагов
- ✅ Несколько пользователей могут использовать систему одновременно (multi-user)
- ✅ Данные изолированы по пользователям

### 10.2. UX Success

- ✅ UI современный и минималистичный
- ✅ UI не содержит "дешевых" YouTube-элементов
- ✅ UI не содержит устаревших стилей
- ✅ UI готов к публичному распространению

### 10.3. Payment Readiness Success

- ✅ Система поддерживает модель тарифов (free/pro)
- ✅ Существует страница планов (`/plans`)
- ✅ Архитектура готова к интеграции платежных провайдеров (extension points)

### 10.4. Infrastructure Success

- ✅ Система использует стандартные технологии (PostgreSQL, Redis)
- ✅ Конфигурация через environment variables
- ✅ Архитектура поддерживает будущее масштабирование (low-friction migration)

---

## Связанные документы

- [Technical Specification](specs/020-mvp-spec.md) — Детальная техническая спецификация MVP
- [Overview](docs/overview.md) — Общий обзор продукта
- [Scope](docs/scope.md) — Область применения MVP
- [Tech Stack](docs/tech-stack.md) — Технологический стек
- [Architecture](docs/architecture.md) — Архитектура системы
- [Data Model](docs/data-model.md) — Модель данных (пост-MVP)
- [UI Flow](docs/ui-flow.md) — UX flow (включая редактор/экспорт)
